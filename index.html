 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Community Problem Reporter</title>
  <link rel="stylesheet" href="../css/footer.css" />
  <link rel="stylesheet" href="../css/newstyle.css">
</head>
<body>

  <header class="main-header">
    <h1>Community Problem Reporter</h1>
    <p>Report Local Problems. Help Make Our Area Better.</p>
    <a href="report.html" class="report-btn">Report a Problem</a>

    <div class="category-icons">
      <span class="icon road">A<br><small>Road</small></span>
      &nbsp 
      <span class="icon electricity">‚ö°<br><small>Electricity</small></span>
      &nbsp
      <span class="icon garbage">üóëÔ∏è<br><small>Garbage</small></span>
      &nbsp
      <span class="icon water">üíß<br><small>Water</small></span>
      &nbsp
      <span class="icon buildings">üè†<br><small>Buildings</small></span>
    </div>
  </header>

  <div class="map-section">
    <img src="../Assets/mapholder.jpg" alt="Map with markers" />
  </div>


  <section class="problems-section">
    <h2>Reported Problems</h2>

    <div class="problem-card">
      <img src="../Assets/pothle.jpg" alt="Pothole Image" />
      <div class="problem-info">
        <h3>Pothole on Main Street <span class="status unresolved">Unresolved</span></h3>
        <p>There is a large pothole in the middle of the road.</p>
        <small>üìç Main St ‚Ä¢ 2h ago</small>
      </div>
    </div>

    <div class="problem-card">
      <img src="../Assets/pole.jpeg" alt="Broken Pole Image" />
      <div class="problem-info">
        <h3>Broken Utility Pole <span class="status in-progress">In Progress</span></h3>
        <p>A utility pole has snapped and is leaning dangerously.</p>
        <small>üìç 4th Ave ‚Ä¢ 1d ago</small>
      </div>
    </div>

    <div class="problem-card">
      <img src="../Assets/trash.jpg" alt="Overflowing Trash Image" />
      <div class="problem-info">
        <h3>Overflowing Trash <span class="status resolved">Resolved</span></h3>
        <p>Excessive garbage piling up on the sidewalk.</p>
        <small>üìç Maple St ‚Ä¢ 3d ago</small>
      </div>
    </div>
    
  </section>

  <footer>
  <p>&copy; 2025 Local Connect. All rights reserved.</p>
  <p>
    <a href="#">About Us</a> |
    <a href="#">Contact</a> |
    <a href="#">Terms of Use</a>
  </p>
   <p>&copy; 2025 Community Voice | <a href="about.html">About Us</a></p>
</footer>
<script src="main.js"></script>
<script>
function loadProblems() {
    const problems = JSON.parse(localStorage.getItem("problems")) || [];
    const problemsSection = document.querySelector(".problems-section");

    // Remove any existing problem cards before rendering
    problemsSection.querySelectorAll(".problem-card").forEach(card => card.remove());

    problems.forEach(problem => {
        const card = document.createElement("div");
        card.classList.add("problem-card", problem.category);

        card.innerHTML = `
            <img src="../Assets/default.jpg" alt="${problem.category} Image" />
            <div class="problem-info">
                <h3>${problem.title} <span class="status ${problem.status}">${capitalize(problem.status)}</span></h3>
                <p>${problem.description}</p>
                <small>üìç ${problem.location} ‚Ä¢ ${timeAgo(problem.time)}</small>
            </div>
        `;

        // Make status clickable to cycle through statuses and update storage
        card.querySelector(".status").addEventListener("click", () => {
            if (problem.status === "unresolved") problem.status = "in-progress";
            else if (problem.status === "in-progress") problem.status = "resolved";
            else problem.status = "unresolved";

            localStorage.setItem("problems", JSON.stringify(problems));
            loadProblems();
        });

        problemsSection.appendChild(card);
    });
}

function capitalize(text) {
    return text.charAt(0).toUpperCase() + text.slice(1).replace("-", " ");
}

function timeAgo(timeISO) {
    const now = new Date();
    const time = new Date(timeISO);
    const diffMs = now - time;

    const seconds = Math.floor(diffMs / 1000);
    if (seconds < 60) return "Just now";

    const minutes = Math.floor(seconds / 60);
    if (minutes < 60) return minutes + "m ago";

    const hours = Math.floor(minutes / 60);
    if (hours < 24) return hours + "h ago";

    const days = Math.floor(hours / 24);
    return days + "d ago";
}

// Load problems on page load
window.addEventListener("DOMContentLoaded", loadProblems);
</script>

</body>
</html>

